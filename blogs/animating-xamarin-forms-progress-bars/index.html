<!doctype html><html><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=icon href=/fav.png type=image/png><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Alata&family=Lora&family=Muli:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto&family=Muli:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Alata&family=Lora&family=Muli:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto&family=Muli:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" media=print onload='this.media="all"'><noscript><link href="https://fonts.googleapis.com/css2?family=Alata&family=Lora&family=Muli:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto&family=Muli:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel=stylesheet></noscript><link rel=stylesheet href=/css/font.css media=all><meta property="og:title" content="Animating Xamarin Forms progress bars"><meta property="og:description" content="Don&rsquo;t you just hate boring UIs? With no animations to bring them to life?
Me too! Especially progress bars - they increment or decrement instantly giving a dull UI.
As you can see from the image above, as the progress bar changes value, the UI updates instantly and it looks a bit dull. What would be nicer is if the progress bar smoothly animated its progress.
Out of the box Xamarin."><meta property="og:type" content="article"><meta property="og:url" content="https://jimbobbennett.dev/blogs/animating-xamarin-forms-progress-bars/"><meta property="og:image" content="https://jimbobbennett.dev/blogs/animating-xamarin-forms-progress-bars/banner.png"><meta property="article:section" content="blogs"><meta property="article:published_time" content="2017-01-05T08:43:11+00:00"><meta property="article:modified_time" content="2017-01-05T08:43:11+00:00"><meta property="og:site_name" content="JimBobBennett"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jimbobbennett.dev/blogs/animating-xamarin-forms-progress-bars/banner.png"><meta name=twitter:title content="Animating Xamarin Forms progress bars"><meta name=twitter:description content="Don&rsquo;t you just hate boring UIs? With no animations to bring them to life?
Me too! Especially progress bars - they increment or decrement instantly giving a dull UI.
As you can see from the image above, as the progress bar changes value, the UI updates instantly and it looks a bit dull. What would be nicer is if the progress bar smoothly animated its progress.
Out of the box Xamarin."><meta name=twitter:site content="@jimbobbennett"><meta name=twitter:creator content="@jimbobbennett"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css integrity=sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3 crossorigin=anonymous><link rel=stylesheet href=/css/header.css media=all><link rel=stylesheet href=/css/footer.css media=all><link rel=stylesheet href=/css/theme.css media=all><link rel="shortcut icon" type=image/png href=/fav.png><link rel="shortcut icon" sizes=192x192 href=/fav.png><link rel=apple-touch-icon href=/fav.png><link rel=alternate type=application/rss+xml href=https://jimbobbennett.dev/index.xml title=JimBobBennett><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","dctc2ydykv")</script><script data-goatcounter=https://jimbobbennett.goatcounter.com/count async src=//gc.zgo.at/count.js></script><style>:root{--text-color:#343a40;--text-secondary-color:#6c757d;--background-color:#000;--secondary-background-color:#64ffda1a;--primary-color:#007bff;--secondary-color:#f8f9fa;--text-color-dark:#e4e6eb;--text-secondary-color-dark:#b0b3b8;--background-color-dark:#000000;--secondary-background-color-dark:#212529;--primary-color-dark:#ffffff;--secondary-color-dark:#212529}body{background-color:#000;font-size:1rem;font-weight:400;line-height:1.5;text-align:left}</style><meta name=description content><link rel=stylesheet href=/css/index.css><link rel=stylesheet href=/css/single.css><link rel=stylesheet href=/css/projects.css media=all><script defer src=/fontawesome-5/all-5.15.4.js></script><title>Animating Xamarin Forms progress bars | JimBobBennett</title></head><body class=light onload=loading()><header><nav class="pt-3 navbar navbar-expand-lg"><div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5"><a class="navbar-brand primary-font text-wrap" href=/><img src=/fav.png width=30 height=30 class="d-inline-block align-top">
JimBobBennett
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarContent aria-controls=navbarContent aria-expanded=false aria-label="Toggle navigation"><svg aria-hidden="true" height="24" viewBox="0 0 16 16" width="24" data-view-component="true"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button><div class="collapse navbar-collapse text-wrap primary-font" id=navbarContent><ul class="navbar-nav ms-auto text-center"><li class="nav-item navbar-text"><a class=nav-link href=/ aria-label=home>Home</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#about aria-label=about>About</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#projects aria-label=projects>Recent Highlights</a></li><li class="nav-item navbar-text"><a class=nav-link href=/blogs title="Blog posts">Blog</a></li><li class="nav-item navbar-text"><a class=nav-link href=/videos title=Videos>Videos</a></li><li class="nav-item navbar-text"><a class=nav-link href=/livestreams title=Livestreams>Livestreams</a></li><li class="nav-item navbar-text"><a class=nav-link href=/conferences title=Conferences>Conferences</a></li><li class="nav-item navbar-text"><a class=nav-link href=/resume title=Resume>Resume</a></li></ul></div></div></nav></header><div id=content><section id=projects><div class="container pt-5" id=list-page><div class="row justify-content-center px-3 px-md-5"><h1 class="text-left pb-2 content">Animating Xamarin Forms progress bars</h1><div class="text-left content"><a href=https://linkedin.com/in/jimbobbennett>Jim Bennett
</a><small>|</small>
Jan 5, 2017</div></div></div></section><section id=single><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-9"><div class=pr-lg-4><article class="page-content p-2"><p>Don&rsquo;t you just hate boring UIs? With no animations to bring them to life?</p><p>Me too! Especially progress bars - they increment or decrement instantly giving a dull UI.</p><div class=image-div style=max-width:300px><p><img src=Progress-1.gif alt="Boring unanimated progress bar"></p></div><p>As you can see from the image above, as the progress bar changes value, the UI updates instantly and it looks a bit dull. What would be nicer is if the progress bar smoothly animated its progress.</p><p>Out of the box Xamarin.Forms provides a method to do this - an extension method called <code>ProgressTo</code>. You can call this code from inside your UI to smoothly animate the progress value to whatever value you like. This is great, but it&rsquo;s not ideal as it relies on the animation happening in the view, so the view needs to know what the value is to animate to. I&rsquo;m a big fan of MVVM (true - I even <a href=http://xam.jbb.io>written a book on how to use MVVM to build Xamarin apps</a>). The progress value should be in a view model, but then we&rsquo;d have to wire up a number of UI components to watch view models for changes then start the animation. Ideally it would be better to have a bindable property that we could use to trigger this animation.</p><p>We could get this bindable property by creating our own control derived from ProgressBar that has a property for the animation, but that involves a custom control. What would be even better is if we could use the existing progress bar and somehow add a property to it that we can bind to and when the value changes the progress animates to the new value. Happily for us, Xamarin Forms supports this in the form of <a href="https://docs.microsoft.com/en-gb/xamarin/xamarin-forms/xaml/attached-properties/?WT.mc_id=formsanimations-blog-jabenn">Attached Properties</a>.</p><p>Attached properties are bindable properties, just like the ones you would create in your own controls, except that they can be &lsquo;attached&rsquo; to any other control. You define them on one class, and attach them to another. Using these we can create a property on a utility class that is attached to <code>ProgressBar</code>. These properties don&rsquo;t directly change anything on the class they are attached to, instead you can hook into the property change mechanism to do whatever you need to do.</p><p>For example, if we wanted an animated progress bar we could create a new attached property called <code>AnimatedProgress</code> attached to <code>ProgressBar</code>, and every time the value changes we could tell the progress bar to change it&rsquo;s progress value via the <code>ProgressTo</code> extension method:</p><pre tabindex=0><code>public static class AttachedProperties
{
   public static BindableProperty AnimatedProgressProperty =
      BindableProperty.CreateAttached(&#34;AnimatedProgress&#34;,
                                      typeof(double),
                                      typeof(ProgressBar),
                                      0.0d,
                                      BindingMode.OneWay,
                                      propertyChanged: (b, o, n) =&gt; 
                                      ProgressBarProgressChanged((ProgressBar)b, (double)n));

   private static void ProgressBarProgressChanged(ProgressBar progressBar, double progress)
   {
      ViewExtensions.CancelAnimations(progressBar);
      progressBar.ProgressTo((double)progress, 800, Easing.SinOut);
   }
}
</code></pre><p>In this code we are defining a static helper class with the static attached property. This property is called <code>"AnimatedProgress"</code>, has a <code>double</code> value, is attached to <code>ProgressBar</code>, has a default value of <code>0.0</code>. It defaults to bind one way, and this is fine as users cannot interact with a progress bar to change this value. The cool part is the <code>propertyChanged</code> action, this calls a method that animates the progress bar to the new value every time it changes.</p><p>Once we&rsquo;ve defined this property we can attach it to any progress bar we want, using XAML or code behind. The XAML way to set it is:</p><pre tabindex=0><code>?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;ContentPage xmlns=&#34;http://xamarin.com/schemas/2014/forms&#34;
	   		 xmlns:x=&#34;http://schemas.microsoft.com/winfx/2009/xaml&#34;
			 xmlns:local=&#34;clr-namespace:AnimatedProgress&#34;
			 x:Class=&#34;AnimatedProgress.AnimatedProgressPage&#34;&gt;
	&lt;StackLayout Padding=&#34;20,100&#34; Spacing=&#34;40&#34;&gt;
		&lt;ProgressBar local:AttachedProperties.AnimatedProgress=&#34;{Binding Progress}&#34;/&gt;
		&lt;Entry Text=&#34;{Binding ProgressPercent}&#34;/&gt;
	&lt;/StackLayout&gt;
&lt;/ContentPage&gt;
</code></pre><p>In this XAML we define the <code>local</code> XML namespace pointing to our local C# namespace, then bind the property using <code>local:AttachedProperties.AnimatedProgress="{Binding Progress}"</code>. This code assumes you have a view model for the page with a property called <code>Progress</code>.</p><p>You can also set this in code:</p><pre tabindex=0><code>MyProgressBar.SetBinding(AttachedProperties.AnimatedProgressProperty,
                                  &#34;Progress&#34;);
</code></pre><p>Once this is wired up we get a lovely animation when we change our progress!</p><p><img src=AnimatedProgress-1.gif alt="Nice, shiny animated progress changing"></p><p>You can find the code for this post on my <a href=https://github.com/jimbobbennett/AnimatedProgress>GitHub Repo</a>.</p></article></div></div><div class="col-sm-12 col-md-12 col-lg-3"><div class=sticky-sidebar><aside class=toc><h5>Table Of Contents</h5><div class=toc-content><nav id=TableOfContents></nav></div></aside><aside class=tags><h5>Tags</h5><ul class="tags-ul list-unstyled list-inline"><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/xamarin target=_blank>xamarin</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/xamarin.forms target=_blank>xamarin.forms</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/technology target=_blank>Technology</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/ui target=_blank>UI</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/animation target=_blank>animation</a></li></ul></aside></div></div></div><div class=row><div class="col-sm-12 col-md-12 col-lg-9 p-4"><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://jimbobbennett.dev/blogs/animating-xamarin-forms-progress-bars/",this.page.identifier="72cee57ed1ed0181c76517cad4bd9d9c"};(function(){if(window.location.hostname=="localhost")return;var e=document,t=e.createElement("script");t.src="https://jimbobbennett.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div><button class="p-2 px-3" onclick=topFunction() id=topScroll>
<i class="fas fa-angle-up"></i></button></section><script>var topScroll=document.getElementById("topScroll");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?topScroll.style.display="block":topScroll.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script></div><footer><div class="container py-4"><div class="row justify-content-center"><div class="col-md-4 text-center">&copy; 2023 All Rights Reserved</div></div></div></div></footer><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js integrity=sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13 crossorigin=anonymous></script><script>document.body.className.includes("light")&&(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))</script><script>let loadingIcons;function loading(){myVar=setTimeout(showPage,100)}function showPage(){try{document.getElementById("loading-icons").style.display="block"}catch{}}</script><script>function createCopyButton(e,t){const n=document.createElement("button");n.className="copy-code-button",n.type="button",n.innerText="Copy",n.addEventListener("click",()=>copyCodeToClipboard(n,e,t)),addCopyButtonToDom(n,e)}async function copyCodeToClipboard(e,t,n){const s=t.querySelector("pre > code").innerText;try{n.writeText(s)}finally{codeWasCopied(e)}}function codeWasCopied(e){e.blur(),e.innerText="Copied!",setTimeout(function(){e.innerText="Copy"},2e3)}function addCopyButtonToDom(e,t){t.insertBefore(e,t.firstChild);const n=document.createElement("div");n.className="highlight-wrapper",t.parentNode.insertBefore(n,t),n.appendChild(t)}if(navigator&&navigator.clipboard)document.querySelectorAll(".highlight").forEach(e=>createCopyButton(e,navigator.clipboard));else{var script=document.createElement("script");script.src="https://cdnjs.cloudflare.com/ajax/libs/clipboard-polyfill/2.7.0/clipboard-polyfill.promise.js",script.integrity="sha256-waClS2re9NUbXRsryKoof+F9qc1gjjIhc2eT7ZbIv94=",script.crossOrigin="anonymous",script.onload=function(){addCopyButtons(clipboard)},document.querySelectorAll(".highlight").forEach(e=>createCopyButton(e,script)),document.body.appendChild(script)}</script></body></html>