<!doctype html><html><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=icon href=/fav.png type=image/png><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Alata&family=Lora&family=Muli:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto&family=Muli:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Alata&family=Lora&family=Muli:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto&family=Muli:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" media=print onload='this.media="all"'><noscript><link href="https://fonts.googleapis.com/css2?family=Alata&family=Lora&family=Muli:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto&family=Muli:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel=stylesheet></noscript><link rel=stylesheet href=/css/font.css media=all><meta property="og:title" content="Binding iOS libraries in Xamarin"><meta property="og:description" content="Update: Since writing this, James Montemagno from Xamarin contacted me to say they are working on an Estimote component. This is now available on the Xamarin component store. Check out his blog post here.
I&rsquo;ve been playing around with iBeacons a lot recently. They seem a really cool technology with a load of interesting potential use cases. My iBeacon of choice is from Estimote, I&rsquo;ve got some of their beacons already and have a pack of stickers on pre-order."><meta property="og:type" content="article"><meta property="og:url" content="https://jimbobbennett.dev/blogs/binding-ios-libraries-in-xamarin/"><meta property="og:image" content="https://jimbobbennett.dev/blogs/binding-ios-libraries-in-xamarin/banner.png"><meta property="article:section" content="blogs"><meta property="article:published_time" content="2015-02-19T15:25:15+00:00"><meta property="article:modified_time" content="2015-02-19T15:25:15+00:00"><meta property="og:site_name" content="JimBobBennett"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jimbobbennett.dev/blogs/binding-ios-libraries-in-xamarin/banner.png"><meta name=twitter:title content="Binding iOS libraries in Xamarin"><meta name=twitter:description content="Update: Since writing this, James Montemagno from Xamarin contacted me to say they are working on an Estimote component. This is now available on the Xamarin component store. Check out his blog post here.
I&rsquo;ve been playing around with iBeacons a lot recently. They seem a really cool technology with a load of interesting potential use cases. My iBeacon of choice is from Estimote, I&rsquo;ve got some of their beacons already and have a pack of stickers on pre-order."><meta name=twitter:site content="@jimbobbennett"><meta name=twitter:creator content="@jimbobbennett"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css integrity=sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3 crossorigin=anonymous><link rel=stylesheet href=/css/header.css media=all><link rel=stylesheet href=/css/footer.css media=all><link rel=stylesheet href=/css/theme.css media=all><link rel="shortcut icon" type=image/png href=/fav.png><link rel="shortcut icon" sizes=192x192 href=/fav.png><link rel=apple-touch-icon href=/fav.png><link rel=alternate type=application/rss+xml href=https://jimbobbennett.dev/index.xml title=JimBobBennett><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","dctc2ydykv")</script><script data-goatcounter=https://jimbobbennett.goatcounter.com/count async src=//gc.zgo.at/count.js></script><style>:root{--text-color:#343a40;--text-secondary-color:#6c757d;--background-color:#000;--secondary-background-color:#64ffda1a;--primary-color:#007bff;--secondary-color:#f8f9fa;--text-color-dark:#e4e6eb;--text-secondary-color-dark:#b0b3b8;--background-color-dark:#000000;--secondary-background-color-dark:#212529;--primary-color-dark:#ffffff;--secondary-color-dark:#212529}body{background-color:#000;font-size:1rem;font-weight:400;line-height:1.5;text-align:left}</style><meta name=description content><link rel=stylesheet href=/css/index.css><link rel=stylesheet href=/css/single.css><link rel=stylesheet href=/css/projects.css media=all><script defer src=/fontawesome-5/all-5.15.4.js></script><title>Binding iOS libraries in Xamarin | JimBobBennett</title></head><body class=light onload=loading()><header><nav class="pt-3 navbar navbar-expand-lg"><div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5"><a class="navbar-brand primary-font text-wrap" href=/><img src=/fav.png width=30 height=30 class="d-inline-block align-top">
JimBobBennett
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarContent aria-controls=navbarContent aria-expanded=false aria-label="Toggle navigation"><svg aria-hidden="true" height="24" viewBox="0 0 16 16" width="24" data-view-component="true"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button><div class="collapse navbar-collapse text-wrap primary-font" id=navbarContent><ul class="navbar-nav ms-auto text-center"><li class="nav-item navbar-text"><a class=nav-link href=/ aria-label=home>Home</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#about aria-label=about>About</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#projects aria-label=projects>Recent Highlights</a></li><li class="nav-item navbar-text"><a class=nav-link href=/blogs title="Blog posts">Blog</a></li><li class="nav-item navbar-text"><a class=nav-link href=/videos title=Videos>Videos</a></li><li class="nav-item navbar-text"><a class=nav-link href=/livestreams title=Livestreams>Livestreams</a></li><li class="nav-item navbar-text"><a class=nav-link href=/conferences title=Conferences>Conferences</a></li><li class="nav-item navbar-text"><a class=nav-link href=/resume title=Resume>Resume</a></li></ul></div></div></nav></header><div id=content><section id=projects><div class="container pt-5" id=list-page><div class="row justify-content-center px-3 px-md-5"><h1 class="text-left pb-2 content">Binding iOS libraries in Xamarin</h1><div class="text-left content"><a href=https://linkedin.com/in/jimbobbennett>Jim Bennett
</a><small>|</small>
Feb 19, 2015</div></div></div></section><section id=single><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-9"><div class=pr-lg-4><article class="page-content p-2"><p>Update: Since writing this, James Montemagno from Xamarin contacted me to say they are working on an Estimote component. This is now available on the Xamarin component store. Check out <a href=http://blog.xamarin.com/adding-real-world-context-with-estimote-beacons-and-stickers/>his blog post here</a>.</p><hr><p>I&rsquo;ve been playing around with iBeacons a lot recently. They seem a really cool technology with a load of interesting potential use cases. My iBeacon of choice is from <a href=http://estimote.com>Estimote</a>, I&rsquo;ve got some of their beacons already and have a pack of stickers on pre-order. As well as providing the basic iBeacon functionality, they also provide a whole host of other features including accelerometers and temperature sensors.</p><p>To access all their beacon functionality, above and beyond the basics that are part of the Apple iBeacon standard, you need to use their SDK. The Apple CoreLocation API will do the basics - ranging, notifications when going in and out of range etc., but for full access you need their SDK. They helpfully provide it for iOS and Android, but not for Xamarin.</p><p>This is not a big deal though, as Xamarin provide an easy enough way to wrap the native SDK&rsquo;s. This post will focus on how to do it for iOS. I&rsquo;ll try to do it for Android later and blog about that separately.</p><h5 id=step-1---grab-the-code>Step 1 - Grab the code</h5><p>The SDK code is on the <a href=https://github.com/Estimote/iOS-SDK>Estimote GitHub site</a>. Clone this locally.</p><h4 id=step-2---create-a-binding-project>Step 2 - Create a binding project</h4><p>Xamarin studio has project types for binding APIs. Start by selecting File -> New Solution, and choosing &lsquo;iOS Binding Project&rsquo; from the Unified API section of the iOS entry in the tree. Apple requires all new apps that are submitted to support 64-bit, so to support this in our apps we need to use the new Unified APIs.</p><p><img src=Screen-Shot-2015-02-19-at-13-23-37.png alt="Chose iOS Binding Project"></p><p>This will create a project with a couple of files in it.</p><ul><li><code>ApiDefinition.cs</code> - This file will end up containing the classes created by wrapping the API.</li><li><code>StructsAndEnums.cs</code> - This file will contain any structus or enums that are created from the API.</li></ul><p>We now need to add the actual library to the project, so do this by dragging it from Finder/Explorer into the project in Xamarin Studio. Drag the <code>iOS-SDK\EstimoteSDK\libEstimoteSDK.a</code> file into your project.
One this is in the project you&rsquo;ll see it in the tree with an expander by it. Expanding this will show a new file <code>libEstimoteSDK.linkwith.cs</code>. This file contains the instructions on how to link the library, and I&rsquo;ll cover this in more detail later.</p><h4 id=step-3---generate-the-api>Step 3 - Generate the API</h4><p>Once we have the library in place, we need to generate the API code to call it. We could do it by hand, but that&rsquo;s far too much trouble. Instead we&rsquo;ll use <a href=http://developer.xamarin.com/guides/ios/advanced_topics/binding_objective-c/objective_sharpie/>Objective Sharpie</a>, a tool from Xamarin to create the code for you. It&rsquo;s currently a beta, but works fine for this SDK. I&rsquo;m hoping one day it will be built into Xamarin Studio so creating binding projects is a one step thing.
Objective Sharpie is a command line tool, you give it the header files that come with the library, tell it what SDK to use, which namespace etc. and it will do the magic.</p><p>In my case, I run the <code>sharpie</code> command it from the EstimoteSDK folder in the SDK github repository, using the following options:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sharpie bind --namespace<span style=color:#f92672>=</span>Estimote --sdk<span style=color:#f92672>=</span>iphoneos8.1 headers/*.h -unified
</span></span></code></pre></div><p>The options are:</p><ul><li><p><code>bind</code> - this tells it to bind the header files</p></li><li><p><code>--namespace=Estimote</code> - this is the defult namespace used in the created files.</p></li><li><p><code>--sdk=iphoneos8.1</code> - this tells it to use the iOS 8.1 SDK for code generation. You should always use the latest SDK.</p></li><li><p><code>headers/*.h</code> - this is the path to the header files you want to generate code for.</p></li><li><p><code>--unified</code> - this tells it to use the new Unified API for 64-bit support.</p></li></ul><p>The code generated is in two files - <code>output.cs</code> and <code>output.enums.cs</code>. For some reason it doesn&rsquo;t output the files using the same naming convention as the binding projects (<code>ApiDefinition.cs</code> and <code>StructsAndEnums.cs</code>). It also doesn&rsquo;t add using directives to the files.</p><p>Once the code has been generated, simply copy the contents of <code>output.cs</code> into <code>ApiDefinition.cs</code> (keeping the namespaces) and <code>output.enums.cs</code> into <code>StructsAndEnums.cs</code>.</p><h4 id=step-4---building-the-code>Step 4 - Building the code</h4><p>Not as easy as you may think! If you do a build, there will be errors. This is because the API uses names for parameters etc. that are reserved words in C#.</p><p>For example check out the ESTBeaconManager.Constructor method:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span>IntPtr Constructor (ESTBeaconManagerDelegate <span style=color:#66d9ef>delegate</span>);
</span></span></code></pre></div><p>This has a parameter <code>delegate</code>, which is a reserved word in C#. Luckily, the parameters can be renamed without any issues, so just rename this to <code>del</code> or another name of your chosing. You&rsquo;ll also have to do the same in <code>ESTBeaconUpdateInfo</code>.</p><p>After changing these, build again and you&rsquo;ll get more errors. These next errors are due to the interfaces in the iOS SDK deriving from <code>NSObject&lt;NSCoding></code> or <code>NSObject &lt;NSCopying, NSCoding></code>. The resulting interfaces created by Objective Sharpie derive from <code>NSCoding</code> or <code>NSCopying</code>, and an interface cannot derive from a concrete class. Luckily, we can just remove the all base classes, so <code>interface ESTBeaconVO : NSCoding</code> becomes <code>interface ESTBeaconVO</code>. Do this for all other interfaces that the compiler complains about.</p><p>Again, we build, and again, more errors. The next set are due to name casing being changed between iOS and Xamarin - namely <code>NSUUID</code> is <code>NSUuid</code>. A quick Replace all and these are fixed.</p><p>The next set of errors are due to missing usings. Objective Sharpie doesn&rsquo;t add any using directives to the generated code which is a shame. A right click -> Resolve -> using CoreLocation; on <code>CLProximity</code> and Resolve -> using CoreBluetooth; on <code>CBPeripheral</code> and the <code>ApiDefinition.cs</code> file will now build. You&rsquo;ll need to so Resolve -> using ObjCRuntime; on the <code>[Native]</code> attribute in <code>StructsAndEnums.cs</code> as well.</p><p>The code should now build.</p><h4 id=step-5---events-instead-of-delegates>Step 5 - Events instead of delegates.</h4><p>Objective-C has an eventing mechanism based on delegates - you create a class that implements a specific delegate protocol and pass it to another class, which then calls back into the methods of your delegate class when things happen. The code generated by Objective Sharpie follows this pattern as it is a one-to-one mapping to the Objective-C code. Luckily, binding projects are smart enough to be able to translate this into events, with the help of a few attributes to help guide it when it generates these events.</p><p>Working down through the code, the first one we come to is <code>ESTBeaconDelegate</code>, used by the <code>ESTBeacon</code> class. The delegate is used to allow the beacon to call back when the connection state changes, or if the accelerometer detects movement.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#a6e22e>[Protocol, Model]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>[BaseType (typeof (NSObject))]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ESTBeaconDelegate</span> {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// ...</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>[BaseType (typeof (NSObject))]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ESTBeacon</span> {
</span></span><span style=display:flex><span><span style=color:#a6e22e>  [Export (&#34;delegate&#34;, ArgumentSemantic.Weak)]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>  [NullAllowed]</span>
</span></span><span style=display:flex><span>  NSObject WeakDelegate { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span><span style=color:#a6e22e>  
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>  [Wrap (&#34;WeakDelegate&#34;)]</span>
</span></span><span style=display:flex><span>  ESTBeaconDelegate Delegate { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The code above has been trimmed down to just show the important stuff. The <code>ESTBeacon</code> class has properties to store the delegate - the two different properties and the attributes allow it to strongly type the delegate class that is passed in (Objective-C uses weakly typed delegates).</p><p>Rather than use a delegate, we want to use events. This is actually really easy, we mark the <code>ESTBeacon</code> class with an attribute to tell it which properties are used for delegates, and to tell it which delegate types to generate events for.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#a6e22e>[BaseType (typeof (NSObject),
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>	Delegates=new string []</span> { <span style=color:#e6db74>&#34;WeakDelegate&#34;</span> }, 
</span></span><span style=display:flex><span>	Events=<span style=color:#66d9ef>new</span> Type [] {<span style=color:#66d9ef>typeof</span>(ESTBeaconDelegate)})]
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ESTBeacon</span> {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// ...</span>
</span></span></code></pre></div><p>This code tells the compiler to generate events for the <code>ESTBeacon</code> class using the <code>ESTBeaconDelegate</code> to define the events, and the delegate is set in the <code>WeakDelegate</code> property. One of these days I&rsquo;ll decompile the code to see how it does all this, but I imagine it will create a private class the exposes the delegate and calls back into the <code>ESTBeacon</code> class to raise the events.</p><p>We also need to tell the compiler how to generate the event signatures for the delegate. This is also done using an attribute, one that provides the name of the event args class.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ESTBeaconDelegate</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// @optional -(void)beaconConnectionDidSucceeded:(ESTBeacon *)beacon;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>	[Export (&#34;beaconConnectionDidSucceeded:&#34;)]</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>void</span> BeaconConnectionDidSucceeded (ESTBeacon beacon);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...</span>
</span></span></code></pre></div><p>becomes:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ESTBeaconDelegate</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// @optional -(void)beaconConnectionDidSucceeded:(ESTBeacon *)beacon;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>	[Export (&#34;beaconConnectionDidSucceeded:&#34;)]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>	[EventArgs(&#34;BeaconConnectionDidSucceeded&#34;)]</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>void</span> BeaconConnectionDidSucceeded (ESTBeacon beacon);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...</span>
</span></span></code></pre></div><p>When the event is created it has the signature:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>event</span> EventHandler&lt;BeaconConnectionDidSucceededEventArgs&gt; BeaconConnectionDidSucceeded;
</span></span></code></pre></div><p>The class <code>BeaconConnectionDidSucceededEventArgs</code> is created and wraps all the parameters in the delegate call as properties - so it will have public property of type <code>ESTBeacon</code> named <code>Beacon</code>. Note that the attribute doesn&rsquo;t have <code>EventArgs</code> on the end of the name - this is added automatically by the compiler. If you do add it, you get an error:</p><pre tabindex=0><code>BTOUCHTASK: error BI1005: btouch: EventArgs in 
EstimoteBinding.ESTBeaconDelegate.BeaconConnectionDidSucceeded attribute should not include 
the text &#39;EventArgs&#39; at the end
</code></pre><p>This process needs to be repeated for all delegate methods and all classes that use delegates - or as much as you think you will need for internal projects. On my long list of things to do is to look at generating these using VS2015 and see if I can automate this step using Roslyn.</p><h4 id=step-6---getting-it-ready-to-use-with-another-project>Step 6 - Getting it ready to use with another project</h4><p>The code now compiles, but as always compilable code isn&rsquo;t shippable code. There&rsquo;s a few more things left to do.</p><p>First, we need to ensure it supports the 64-bit processors. In the <code>libEstimoteSDK.linkwith.cs</code> you will see it is set to link with v7, v7s and the simulator:</p><pre tabindex=0><code>LinkTarget.ArmV7 | LinkTarget.ArmV7s | LinkTarget.Simulator
</code></pre><p>We need to add the 64-bit processors to this list, so change it to:</p><pre tabindex=0><code>LinkTarget.ArmV7 | LinkTarget.ArmV7s | LinkTarget.Arm64 | LinkTarget.Simulator | LinkTarget.Simulator64
</code></pre><br><p>Secondly we should review naming. Objective Sharpie tries, but it does get things wrong. For example, the <code>beaconConnectionDidFail</code> method call is named wrong, instead being named by it&rsquo;s parameter:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#75715e>// @optional -(void)beaconConnectionDidFail:(ESTBeacon *)beacon withError:(NSError *)error;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>[Export (&#34;beaconConnectionDidFail:withError:&#34;)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> WithError (ESTBeacon beacon, NSError error);
</span></span></code></pre></div><p>This should be changed to be:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#75715e>// @optional -(void)beaconConnectionDidFail:(ESTBeacon *)beacon withError:(NSError *)error;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>[Export (&#34;beaconConnectionDidFail:withError:&#34;)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> BeaconConnectionDidFail (ESTBeacon beacon, NSError error);
</span></span></code></pre></div><p>I haven&rsquo;t yet worked out a pattern as to when these odd namings happen - if you work it out please let me know!.</p><h4 id=step-7--->Step 7 - ???</h4><h4 id=step-8---profit>Step 8 - Profit!</h4><p>Not really, but you now have a nice binding for the Estimote SDK. Hopefully these instructions make sense, tweet me/mail me with any issues you may have or any questions. Xamarin has a load of <a href=http://developer.xamarin.com/guides/ios/advanced_topics/binding_objective-c/>really helpfull docs</a> covering pretty much everything you would need to know about binding.</p><p>And if you can&rsquo;t be bothered to do all this your self, you can just download my bindings from <a href=https://github.com/jimbobbennett/EstimoteBinding>my GitHub page</a> which I am trying to keep pretty much up to date and includes a Xamarin.Forms based test app to show it all working. I hope to have a NuGet package or a Xamarin component available soon.</p></article></div></div><div class="col-sm-12 col-md-12 col-lg-3"><div class=sticky-sidebar><aside class=toc><h5>Table Of Contents</h5><div class=toc-content><nav id=TableOfContents><ul><li><ul><li></li></ul></li></ul></nav></div></aside><aside class=tags><h5>Tags</h5><ul class="tags-ul list-unstyled list-inline"><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/ios target=_blank>iOS</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/xamarin target=_blank>xamarin</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/xamarin.ios target=_blank>xamarin.ios</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/xamarin.forms target=_blank>xamarin.forms</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/estimote target=_blank>estimote</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/ibeacon target=_blank>ibeacon</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/binding target=_blank>binding</a></li></ul></aside></div></div></div><div class=row><div class="col-sm-12 col-md-12 col-lg-9 p-4"><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://jimbobbennett.dev/blogs/binding-ios-libraries-in-xamarin/",this.page.identifier="1bf87086d8bc3b29df7a0cbbe7be824e"};(function(){if(window.location.hostname=="localhost")return;var e=document,t=e.createElement("script");t.src="https://jimbobbennett.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div><button class="p-2 px-3" onclick=topFunction() id=topScroll>
<i class="fas fa-angle-up"></i></button></section><script>var topScroll=document.getElementById("topScroll");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?topScroll.style.display="block":topScroll.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script></div><footer><div class="container py-4"><div class="row justify-content-center"><div class="col-md-4 text-center">&copy; 2023 All Rights Reserved</div></div></div></div></footer><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js integrity=sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13 crossorigin=anonymous></script><script>document.body.className.includes("light")&&(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))</script><script>let loadingIcons;function loading(){myVar=setTimeout(showPage,100)}function showPage(){try{document.getElementById("loading-icons").style.display="block"}catch{}}</script><script>function createCopyButton(e,t){const n=document.createElement("button");n.className="copy-code-button",n.type="button",n.innerText="Copy",n.addEventListener("click",()=>copyCodeToClipboard(n,e,t)),addCopyButtonToDom(n,e)}async function copyCodeToClipboard(e,t,n){const s=t.querySelector("pre > code").innerText;try{n.writeText(s)}finally{codeWasCopied(e)}}function codeWasCopied(e){e.blur(),e.innerText="Copied!",setTimeout(function(){e.innerText="Copy"},2e3)}function addCopyButtonToDom(e,t){t.insertBefore(e,t.firstChild);const n=document.createElement("div");n.className="highlight-wrapper",t.parentNode.insertBefore(n,t),n.appendChild(t)}if(navigator&&navigator.clipboard)document.querySelectorAll(".highlight").forEach(e=>createCopyButton(e,navigator.clipboard));else{var script=document.createElement("script");script.src="https://cdnjs.cloudflare.com/ajax/libs/clipboard-polyfill/2.7.0/clipboard-polyfill.promise.js",script.integrity="sha256-waClS2re9NUbXRsryKoof+F9qc1gjjIhc2eT7ZbIv94=",script.crossOrigin="anonymous",script.onload=function(){addCopyButtons(clipboard)},document.querySelectorAll(".highlight").forEach(e=>createCopyButton(e,script)),document.body.appendChild(script)}</script></body></html>