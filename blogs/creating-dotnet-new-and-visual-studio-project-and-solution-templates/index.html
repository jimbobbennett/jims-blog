<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=icon href=/fav.png type=image/png><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Alata&family=Lora&family=Muli:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto&family=Muli:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Alata&family=Lora&family=Muli:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto&family=Muli:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" media=print onload='this.media="all"'><noscript><link href="https://fonts.googleapis.com/css2?family=Alata&family=Lora&family=Muli:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto&family=Muli:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel=stylesheet></noscript><link rel=stylesheet href=/css/font.css media=all><meta property="og:title" content="Creating Visual Studio project and solution templates - Part 1, dotnet new"><meta property="og:description" content="I&rsquo;ve recently updated my MvvmCross templates to support .NET Standard to be ready for the awesome future. Unfortunately this meant a complete rewrite of my templates as the out of the box Visual Studio project template extensions on both Windows and Mac don&rsquo;t support .NET Standard. As it turned out though, this rewrite was a blessing in disguise as there is a new way to do templates, and this can be used with the dotnet cli as well as inside extensions for VS on Windows and Mac, meaning I can now create one template and use it on all platforms."><meta property="og:type" content="article"><meta property="og:url" content="https://jimbobbennett.dev/blogs/creating-dotnet-new-and-visual-studio-project-and-solution-templates/"><meta property="og:image" content="https://jimbobbennett.dev/blogs/creating-dotnet-new-and-visual-studio-project-and-solution-templates/banner.png"><meta property="article:section" content="blogs"><meta property="article:published_time" content="2017-10-25T06:42:53+00:00"><meta property="article:modified_time" content="2017-10-25T06:42:53+00:00"><meta property="og:site_name" content="JimBobBennett"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jimbobbennett.dev/blogs/creating-dotnet-new-and-visual-studio-project-and-solution-templates/banner.png"><meta name=twitter:title content="Creating Visual Studio project and solution templates - Part 1, dotnet new"><meta name=twitter:description content="I&rsquo;ve recently updated my MvvmCross templates to support .NET Standard to be ready for the awesome future. Unfortunately this meant a complete rewrite of my templates as the out of the box Visual Studio project template extensions on both Windows and Mac don&rsquo;t support .NET Standard. As it turned out though, this rewrite was a blessing in disguise as there is a new way to do templates, and this can be used with the dotnet cli as well as inside extensions for VS on Windows and Mac, meaning I can now create one template and use it on all platforms."><meta name=twitter:site content="@jimbobbennett"><meta name=twitter:creator content="@jimbobbennett"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css integrity=sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3 crossorigin=anonymous><link rel=stylesheet href=/css/header.css media=all><link rel=stylesheet href=/css/footer.css media=all><link rel=stylesheet href=/css/theme.css media=all><link rel="shortcut icon" type=image/png href=/fav.png><link rel="shortcut icon" sizes=192x192 href=/fav.png><link rel=apple-touch-icon href=/fav.png><link rel=alternate type=application/rss+xml href=https://jimbobbennett.dev/index.xml title=JimBobBennett><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","dctc2ydykv")</script><style>:root{--text-color:#343a40;--text-secondary-color:#6c757d;--background-color:#000;--secondary-background-color:#64ffda1a;--primary-color:#007bff;--secondary-color:#f8f9fa;--text-color-dark:#e4e6eb;--text-secondary-color-dark:#b0b3b8;--background-color-dark:#000000;--secondary-background-color-dark:#212529;--primary-color-dark:#ffffff;--secondary-color-dark:#212529}body{background-color:#000;font-size:1rem;font-weight:400;line-height:1.5;text-align:left}</style><meta name=description content><link rel=stylesheet href=/css/index.css><link rel=stylesheet href=/css/single.css><link rel=stylesheet href=/css/projects.css media=all><script defer src=/fontawesome-5/all-5.15.4.js></script><title>Creating Visual Studio project and solution templates - Part 1, dotnet new | JimBobBennett</title></head><body class=light onload=loading()><header><nav class="pt-3 navbar navbar-expand-lg"><div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5"><a class="navbar-brand primary-font text-wrap" href=/><img src=/fav.png width=30 height=30 class="d-inline-block align-top">
JimBobBennett</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarContent aria-controls=navbarContent aria-expanded=false aria-label="Toggle navigation"><svg aria-hidden="true" height="24" viewBox="0 0 16 16" width="24" data-view-component="true"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button><div class="collapse navbar-collapse text-wrap primary-font" id=navbarContent><ul class="navbar-nav ms-auto text-center"><li class="nav-item navbar-text"><a class=nav-link href=/ aria-label=home>Home</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#about aria-label=about>About</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#projects aria-label=projects>Recent Highlights</a></li><li class="nav-item navbar-text"><a class=nav-link href=/blogs title="Blog posts">Blog</a></li><li class="nav-item navbar-text"><a class=nav-link href=/videos title=Videos>Videos</a></li><li class="nav-item navbar-text"><a class=nav-link href=/livestreams title=Livestreams>Livestreams</a></li><li class="nav-item navbar-text"><a class=nav-link href=/conferences title=Conferences>Conferences</a></li><li class="nav-item navbar-text"><a class=nav-link href=/resume title=Resume>Resume</a></li></ul></div></div></nav></header><div id=content><section id=projects><div class="container pt-5" id=list-page><div class="row justify-content-center px-3 px-md-5"><h1 class="text-left pb-2 content">Creating Visual Studio project and solution templates - Part 1, dotnet new</h1><div class="text-left content">Jim Bennett
<small>|</small>
Oct 25, 2017</div></div></div></section><section id=single><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-9"><div class=pr-lg-4><article class="page-content p-2"><p>I&rsquo;ve recently updated my <a href=https://github.com/jimbobbennett/MvvmCross-Templates>MvvmCross templates</a> to support .NET Standard to be ready for the awesome future. Unfortunately this meant a complete rewrite of my templates as the out of the box Visual Studio project template extensions on both Windows and Mac don&rsquo;t support .NET Standard. As it turned out though, this rewrite was a blessing in disguise as there is a new way to do templates, and this can be used with the <code>dotnet</code> cli as well as inside extensions for VS on Windows and Mac, meaning I can now create one template and use it on all platforms.</p><p>This post shows how to create templates for the .NET cli, and in the next two posts these templates will be ported to Visual Studio, first Windows then Mac.</p><h4 id=dotnet-new>dotnet new</h4><p>As part of the new .NET Core awesomeness, there is a new cli for .NET. You can install this manually from <a href=https://www.microsoft.com/net/core>https://www.microsoft.com/net/core</a>, otherwise you can install it with Visual Studio.</p><p>Once you have the .NET cli installed you can use the command line to create new apps based off templates using <code>dotnet new &lt;template name></code>. Some templates come pre-installed, and you can download and install others to provide any kind of project your heart desires. This post is not going to cover the cli, you can read up on that from the previous link, instead we are going to look at creating templates.</p><h4 id=dotnet-new-templates>dotnet new templates</h4><p>The templates used by <code>dotnet new</code> are actually really simple - they are fully working projects or solutions with a config file. If you&rsquo;ve ever created a project or solution extension for Visual Studio you&rsquo;ve probably had the fun of creating a project then changing namespaces and project references to be <code>$ProjectName</code> or other such replacement tokens. These projects then cannot be run, so to change them you have to change the code, build the extension, create a project, find problems, rinse and repeat. With dotnet new templates you don&rsquo;t have to do this.</p><h6 id=step-1---create-a-project>Step 1 - create a project</h6><p>The first thing to do is a create a project or solution that you want to create the template from. Add the relevant NuGet packages, add classes, resources, whatever you need. This is a normal project, the same you use every day so you can run it at any time for testing.</p><h6 id=step-2---create-a-templateconfig-file>Step 2 - create a template.config file</h6><p>At the root of your project or solution, create a folder called <code>.template.config</code> and add a json file called <code>template.json</code> to that folder. This file defines the structure of the template, including providing a base namespace that you used in your project. When a new project is created using your template, all the files in your source project will be used, with the namespace changed to the namespace passed to dotnet new.</p><p>For example if your project had the namespace <code>MvvmCrossApp</code>, you set this in the <code>template.json</code> file. If the end user tells dotnet new to use the namespace <code>Foo</code>, any occurrences of <code>MvvmCrossApp</code> in source files or project files will be replaced with <code>Foo</code> automatically - no need to use replacement tokens.</p><p>You can read about all the fields in this file at <a href=https://blogs.msdn.microsoft.com/dotnet/2017/04/02/how-to-create-your-own-templates-for-dotnet-new/>https://blogs.msdn.microsoft.com/dotnet/2017/04/02/how-to-create-your-own-templates-for-dotnet-new/</a>. You can also install an extension to Visual Studio for Windows called <a href="https://marketplace.visualstudio.com/items?itemName=Sayed-Ibrahim-Hashimi.SidewaffleCreator2017">Sidewaffle Creator</a> that has a wizard to help create these files.</p><h6 id=step-3---create-a-nuget-package>Step 3 - create a NuGet package</h6><p>These templates are packaged as NuGet packages, so you will need to create a <code>.nuspec</code> and package up your files. This NuSpec needs to have the usual id, description, version, as well a package type of template set in the metadata. All the source files for your project need to be added as files. You can see an example I use for my MvvmCross templates below:</p><pre tabindex=0><code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;package xmlns=&#34;http://schemas.microsoft.com/packaging/2012/06/nuspec.xsd&#34;&gt;
  &lt;metadata&gt;
    &lt;id&gt;MvvmCross.Templates.CSharp.Native.SinglePage.iOS.Android&lt;/id&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;
    &lt;description&gt;
      Creates an example single page MvvmCross app for iOS, Android, UWP and WPF.
    &lt;/description&gt;
    &lt;authors&gt;Jim Bennett&lt;/authors&gt;
    &lt;packageTypes&gt;
      &lt;packageType name=&#34;Template&#34; /&gt;
    &lt;/packageTypes&gt;
  &lt;/metadata&gt;
  &lt;files&gt;
    &lt;file src=&#34;.\MvvmCrossNativeSinglePage\**&#34; target=&#34;content&#34; exclude=&#34;.\MvvmCrossNativeSinglePage\packages\**;.\MvvmCrossNativeSinglePage\*.UWP\**;.\MvvmCrossNativeSinglePage\*.WPF\**;.\MvvmCrossNativeSinglePage\.template.config\template.json;**\bin\**;**\obj\**;**\.vs\**;**\*.user;&#34;/&gt;
    &lt;file src=&#34;.\MVVMCross.XSAddIn\MvvmCrossNativeSinglePage.template.json&#34; target=&#34;content\.template.config\template.json&#34;/&gt;
  &lt;/files&gt;
&lt;/package&gt;
</code></pre><p>This is packaged up using the NuGet command line to give a standard NuGet package.</p><h6 id=step-4---install-the-template>Step 4 - install the template</h6><p>Templates can be installed in one of two ways. To test locally, you can install using:</p><pre tabindex=0><code>dotnet new --install &lt;path_to_nuget_package&gt;
</code></pre><p>Then if you run <code>dotnet new</code> you should see your template in the list of available templates. You can then create a new project or solution using your template by using:</p><pre tabindex=0><code>dotnet new &lt;template_short_name&gt; -o &lt;output_folder_and_namespace_name&gt;
</code></pre><h6 id=step-5---distribute-the-template>Step 5 - distribute the template</h6><p>Once you&rsquo;ve verified locally, you can upload your NuGet package to <a href=https://NuGet.org>NuGet.org</a>. From there anyone can install your template using:</p><pre tabindex=0><code>dotnet new --install &lt;NuGet_package_id&gt;
</code></pre><p>You can see an example of this for my MvvmCross templates at <a href=https://github.com/jimbobbennett/MvvmCross-Templates>https://github.com/jimbobbennett/MvvmCross-Templates</a></p><hr><p>In the next post we&rsquo;ll look at using this template inside a Visual Studio for Windows extension.</p></article></div></div><div class="col-sm-12 col-md-12 col-lg-3"><div class=sticky-sidebar><aside class=toc><h5>Table Of Contents</h5><div class=toc-content><nav id=TableOfContents><ul><li><ul><li></li></ul></li></ul></nav></div></aside><aside class=tags><h5>Tags</h5><ul class="tags-ul list-unstyled list-inline"><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/xamarin target=_blank>xamarin</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/technology target=_blank>Technology</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/.net-core target=_blank>.NET Core</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/dotnet-new target=_blank>dotnet new</a></li><li class=list-inline-item><a href=https://jimbobbennett.dev/tags/templates target=_blank>templates</a></li></ul></aside></div></div></div><div class=row><div class="col-sm-12 col-md-12 col-lg-9 p-4"><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://jimbobbennett.dev/blogs/creating-dotnet-new-and-visual-studio-project-and-solution-templates/",this.page.identifier="f8c7a58b670fb551a6f35d04b58492bf"};(function(){if(window.location.hostname=="localhost")return;var e=document,t=e.createElement("script");t.src="https://jimbobbennett.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div><button class="p-2 px-3" onclick=topFunction() id=topScroll>
<i class="fas fa-angle-up"></i></button></section><script>var topScroll=document.getElementById("topScroll");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?topScroll.style.display="block":topScroll.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script></div><footer><div class="container py-4"><div class="row justify-content-center"><div class="col-md-4 text-center">&copy; 2022 All Rights Reserved</div></div></div></div></footer><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js integrity=sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13 crossorigin=anonymous></script>
<script>document.body.className.includes("light")&&(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))</script><script>let loadingIcons;function loading(){myVar=setTimeout(showPage,100)}function showPage(){try{document.getElementById("loading-icons").style.display="block"}catch{}}</script><script>function createCopyButton(e,t){const n=document.createElement("button");n.className="copy-code-button",n.type="button",n.innerText="Copy",n.addEventListener("click",()=>copyCodeToClipboard(n,e,t)),addCopyButtonToDom(n,e)}async function copyCodeToClipboard(e,t,n){const s=t.querySelector("pre > code").innerText;try{n.writeText(s)}finally{codeWasCopied(e)}}function codeWasCopied(e){e.blur(),e.innerText="Copied!",setTimeout(function(){e.innerText="Copy"},2e3)}function addCopyButtonToDom(e,t){t.insertBefore(e,t.firstChild);const n=document.createElement("div");n.className="highlight-wrapper",t.parentNode.insertBefore(n,t),n.appendChild(t)}if(navigator&&navigator.clipboard)document.querySelectorAll(".highlight").forEach(e=>createCopyButton(e,navigator.clipboard));else{var script=document.createElement("script");script.src="https://cdnjs.cloudflare.com/ajax/libs/clipboard-polyfill/2.7.0/clipboard-polyfill.promise.js",script.integrity="sha256-waClS2re9NUbXRsryKoof+F9qc1gjjIhc2eT7ZbIv94=",script.crossOrigin="anonymous",script.onload=function(){addCopyButtons(clipboard)},document.querySelectorAll(".highlight").forEach(e=>createCopyButton(e,script)),document.body.appendChild(script)}</script></body></html>